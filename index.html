<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8_decode" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Formulaire Drone non autorisé" />
    <meta name="author" content="Cédric COLLARDEAU" />
    <title>Formulaire Drone</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
    <!-- Optional theme -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
      integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
      crossorigin="anonymous"
    />
    <!-- Latest compiled and minified JavaScript -->
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
      integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
      crossorigin="anonymous"
    ></script>

    <style>
      hr {
        margin: 0;
      }

      .checkbox label:after,
      .radio label:after {
        content: "";
        display: table;
        clear: both;
      }

      .checkbox .cr,
      .radio .cr {
        position: relative;
        display: inline-block;
        border: 1px solid #a9a9a9;
        border-radius: 0.25em;
        width: 1.3em;
        height: 1.3em;
        /* float: left; */
        margin-right: 0.5em;
      }

      .radio .cr {
        border-radius: 50%;
      }

      .checkbox .cr .cr-icon,
      .radio .cr .cr-icon {
        position: absolute;
        font-size: 0.8em;
        line-height: 0;
        top: 50%;
        left: 20%;
      }

      .radio .cr .cr-icon {
        margin-left: 0.04em;
      }

      .checkbox label input[type="checkbox"],
      .radio label input[type="radio"] {
        display: none;
      }

      .checkbox label input[type="checkbox"] + .cr > .cr-icon,
      .radio label input[type="radio"] + .cr > .cr-icon {
        transform: scale(3) rotateZ(-20deg);
        opacity: 0;
        transition: all 0.3s ease-in;
      }

      .checkbox label input[type="checkbox"]:checked + .cr > .cr-icon,
      .radio label input[type="radio"]:checked + .cr > .cr-icon {
        transform: scale(1) rotateZ(0deg);
        opacity: 1;
      }

      .checkbox label input[type="checkbox"]:disabled + .cr,
      .radio label input[type="radio"]:disabled + .cr {
        opacity: 0.5;
      }
    </style>
  </head>

  <body>
    <header></header>

    <div class="container">
      <h1>Présence non autorisée de drones</h1>
      <p>formulaire de notification à la BGTA de la Réunion</p>
    </div>

    <div class="container" style="max-width:560px">
      <!-- Panneau "Quand" -->
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">A - Date et heure de l’événement :</h3>
        </div>
        <div class="panel-body">
          <div class="form-group">
            <label for="id_date">Date</label>
            <input type="date" class="form-control" id="id_date" />
          </div>
          <div class="form-group">
            <label for="heure_UTC">Heure UTC</label>
            <input type="time" class="form-control" id="heure_UTC" />
          </div>
        </div>
      </div>
      <!-- Panneau "Où" -->
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">B - Localisation :</h3>
        </div>
        <div class="panel-body">
          <div class="form-group">
            <label for="id_localisation">Localisation</label>
            <input
              type="text"
              class="form-control"
              id="id_localisation"
              placeholder="Ex : port de Sainte-Marie.."
            />
          </div>
          <div class="form-group">
            <label for="id_altitude">Altitude</label>
            <input
              type="text"
              class="form-control"
              id="id_altitude"
              placeholder="Ex : 1000 FT QNH.."
            />
          </div>
          <div class="form-group">
            <label for="id_distance"
              >Distance estimée de séparation verticale/horizontale</label
            >
            <input
              type="text"
              class="form-control"
              id="id_distance"
              placeholder="Ex : 0.5 Nm, 500 FT.."
            />
          </div>
        </div>
      </div>

      <!-- Panneau "Qui" -->
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">C - Description :</h3>
        </div>
        <div class="panel-body">
          <div class="form-group">
            <label for="id_size">Taille</label>
            <input
              type="text"
              class="form-control"
              id="id_size"
              placeholder="Ex : >1 M.."
            />
          </div>
          <div class="form-group">
            <label for="id_forme">Forme</label>
            <input
              type="image"
              src="https://static-fr.wondershare.com/images-www/filmora/resource/win/types-of-drones.png"
              alt="formes"
              width="100%"
              height="auto"
            />
            <div class="col-xs-9" style="text-align: left; padding-top: 9px;">
              <div id="radio_forme">
                <input type="radio" name="r_form" value="QUAD I" checked /><span
                  style="margin-right:10px;"
                >
                  Quad I</span
                >
                <input type="radio" name="r_form" value="QUAD X" /><span
                  style="margin-right:10px;"
                >
                  Quad X</span
                >
                <input type="radio" name="r_form" value="HEX I" /><span
                  style="margin-right:10px;"
                >
                  Hex I</span
                >
                <input type="radio" name="r_form" value="HEX V" /><span
                  style="margin-right:10px;"
                >
                  Hex V</span
                ><br />
                <input type="radio" name="r_form" value="HEX Y" /><span
                  style="margin-right:10px;"
                >
                  Hex Y</span
                >
                <input type="radio" name="r_form" value="HEX IY" /><span
                  style="margin-right:10px;"
                >
                  Hex IY</span
                >
                <input type="radio" name="r_form" value="OCT X" /><span
                  style="margin-right:10px;"
                >
                  Oct X</span
                >
                <input type="radio" name="r_form" value="OCT I" /><span
                  style="margin-right:10px;"
                >
                  Oct I</span
                >
                <input type="radio" name="r_form" value="OCT V" /><span
                  style="margin-right:10px;"
                >
                  Oct V</span
                >
              </div>
              <br />
            </div>
            <input
              type="text"
              class="form-control"
              id="id_forme"
              placeholder="Autre.."
            />
          </div>
          <div class="form-group">
            <label for="id_look">Apparence</label>
            <input
              type="text"
              class="form-control"
              id="id_look"
              placeholder="Ex : couleur, marques.."
            />
          </div>
        </div>
      </div>

      <!-- Panneau "Quoi" -->
      <div class="panel panel-danger">
        <div class="panel-heading">
          <h3 class="panel-title">D - Type d'évolution :</h3>
        </div>
        <div class="panel-body">
          <div id="radio_evolution">
            <input
              type="radio"
              name="r_evolution"
              value="stationnaire"
              checked
            /><span style="margin-right:10px;"> Vol Stationnaire</span> <br />
            <input type="radio" name="r_evolution" value="déplacement" /><span
              style="margin-right:10px;"
            >
              Vol en déplacement</span
            >
          </div>
        </div>
      </div>

      <!-- Panneau "plainte" -->
      <div class="panel panel-danger">
        <div class="panel-heading">
          <h3 class="panel-title">
            E - L’équipage souhaite-t-il déposer plainte ?
          </h3>
        </div>
        <div class="panel-body">
          <label class="radio-inline"
            ><input type="radio" name="o_plainte" checked value=" Oui" />
            Oui</label
          >
          <label class="radio-inline"
            ><input type="radio" name="o_plainte" value=" Non" /> Non</label
          >
        </div>
      </div>

      <div class="row" id="buttons">
        <div class="col-xs-6" style="text-align: left">
          <button
            id="validate_DRONE_btn"
            type="text"
            class="btn btn-primary"
            onclick="generateDRONEbody()"
            style="margin-right:10px;"
          >
            <span
              class="glyphicon glyphicon-plane"
              aria-hidden="true"
              style="margin-right: 7px;"
            ></span>
            Générer et valider le message Drone
          </button>
        </div>
        <div class="col-xs-6" style="text-align: right">
          <button
            id="send_DRONE_btn"
            type="text"
            class="btn btn-success"
            onclick="sendDRONE()"
            style="display:none;"
          >
            <span
              class="glyphicon glyphicon-envelope"
              aria-hidden="true"
              style="margin-right: 7px;"
            ></span>
            Envoyer le message Drone
          </button>
        </div>
        <div class="col-xs-12" style="text-align: center; margin-top: 10px">
          <button
            id="reload_btn"
            type="text"
            class="btn btn-danger"
            onclick="window.location.reload(true);"
            style="width:100%; display:none;"
          >
            <span
              class="glyphicon glyphicon-refresh"
              aria-hidden="true"
              style="margin-right: 7px;"
            ></span>
            Reset
          </button>
        </div>
      </div>

      <!-- Aperçu du message que l'on va envoyer à la BGTA -->
      <textarea
        id="DRONEbody"
        rows="18"
        style="width:100%; border: 2px solid black; border-radius:10px; padding:10px; margin-top: 10px; margin-bottom: 10px; font-style:italic;resize: vertical;"
        placeholder="Le contenu du message DRONE sera affiché ici après validation."
        readonly
      ></textarea>
    </div>

    <footer></footer>
  </body>

  <script>
    function generateDRONEbody() {
      var today = new Date();
      var dd = today.getDate();
      var mm = today.getMonth() + 1;
      var yyyy = today.getFullYear();

      // L'entête du message est à adapter selon le centre
      var body =
        "MESSAGE DE LA TOUR DE CONTRÔLE ROLAND-GARROS LE " +
        dd +
        "/" +
        mm +
        "/" +
        yyyy +
        "\n" +
        "" +
        "\n" +
        "----------------------------------------------" +
        "\n" +
        "Présence non autorisée de drones " +
        "\n" +
        "----------------------------------------------" +
        "\n" +
        "" +
        "\n" +
        "A - Date et heure de l'évènement : " +
        "\n" +
        "A1 - Date : " +
        document.getElementById("id_date").value +
        "\n" +
        "A2 - Heure UTC : " +
        document.getElementById("heure_UTC").value +
        "\n" +
        "B1 - Localisation : " +
        document.getElementById("id_localisation").value +
        "\n" +
        "B2 - Altitude : " +
        document.getElementById("id_altitude").value +
        "\n" +
        "B3 - Distance estimée de séparation verticale/horizontale : " +
        document.getElementById("id_distance").value +
        "\n" +
        "C - Description : " +
        "\n" +
        "C1 - Taille : " +
        document.getElementById("id_size").value +
        "\n" +
        "C2 - Forme : " +
        document.querySelector('input[name="r_form"]:checked').value +
        "  " +
        document.getElementById("id_forme").value +
        "\n" +
        "C3 - Apparence : " +
        document.getElementById("id_look").value +
        "\n" +
        "D - Type d'évolution : " +
        document.querySelector('input[name="r_evolution"]:checked').value +
        "\n" +
        "E - L’équipage souhaite-t-il déposer plainte ? :" +
        document.querySelector('input[name="o_plainte"]:checked').value;

      document.getElementById("DRONEbody").value = body;
      document.getElementById("send_DRONE_btn").style.display = "inline";
      document.getElementById("reload_btn").style.display = "inline";
    }

    // Fonction qui ouvre le client de messagerie lors du clic sur le bouton "envoyer", pour envoie à la BGTA du message eDrone
    function sendDRONE() {
      // link : variable à adapter
      var link =
        "mailto:bgta.st-denis-la-reunion@gendarmerie.interieur.gouv.fr?cc=:sna-oi-se@aviation-civile.gouv.fr;drones.sna-oi@aviation-civile.gouv.fr;qss.sna-oi@aviation-civile.gouv.fr&subject=Message DRONE du SNA-OI&body=" +
        encodeURIComponent(document.getElementById("DRONEbody").value);
      window.location.href = link;
    }
  </script>
</html>
